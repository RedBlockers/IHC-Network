<!DOCTYPE html>
<html lang="fr">
<head>
  <link rel="icon" href="./images/NoScord.jpg">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/default.min.css">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NoScord</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
  <style>
    /* Styles de la scrollbar */
    ::-webkit-scrollbar {
      width: 12px;
    }
    ::-webkit-scrollbar-track {
      background-color: transparent;
    }
    ::-webkit-scrollbar-thumb {
      background-color: rgba(255, 255, 255, 0.3);
      border-radius: 6px;
    }
    body::-webkit-scrollbar {
      display: none;
    }
    code {
      white-space: pre-wrap;
    }
    td,tr,th {
      border: white solid 1px;
      text-align: center;
    }
    /* Styles pour la sidebar */
    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
      width: 300px;
      color: white;
      overflow-y: hidden;
      z-index: 1000;
      background-color: #25292d;
    }
    .sidebar a {
      color: #ffffff;
      text-decoration: none;
      display: block;
      padding: 8px 0;
      font-size: 1.1em;
    }
    .sidebar a:hover {
      background-color: #555;
      border-radius: 5px;
    }
    .sidebar h2 {
      text-align: center;
    }

    .main-content {
      margin-left: 320px;
    }

    .input-group {
      margin-bottom: 15px;
    }
    #messageBox {
      height: calc(85vh - 24px);
      overflow-y: scroll;
      padding: 10px;
    }
    #messageBox img{
      max-width: 100%;
    }
    #messageContainer {
      height: 85vh;
    }
    #secondaryContainer{
      background-color: #272727;
    }
    .btn-edit, .btn-delete {
      margin-left: 10px;
      color: #ffffff;
      background-color: transparent;
      border: none;
    }
    .btn-edit:hover, .btn-delete:hover {
      color: #cccccc;
    }
    .account-info {
      text-align: right;
      margin-bottom: 10px;
    }
    .message-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .avatar {
      height: 45px;
      width: 45px;
      border-radius: 50%;
    }
    .timestamp {
      font-size: .75em;
      color: rgb(86, 96, 93);
    }
    .username {
      font-size: 1.1em;
      letter-spacing: 1px;
    }
    .userInfo {
      height: 15vh;
    }
    .tool-container div :hover {
      cursor: pointer;
    }
    .tool-container svg{
      height: 19px;
      width: 19px;
    }
    .settings-button {
      transition: transform 0.5s ease-in-out;
      display: inline-block;
      transform-origin: center;
    }

    .settings-button:hover {
      transform: rotate(180deg);
    }
    .guild{
      transition: 0.2s ease-in-out;
      display: inline-block;
      transform-origin: center;
    }
    .guild:hover {
      border-radius: 10px;
      color: #3ea457;
    }
    .content{
      max-width: 100%;
    }
    @keyframes rotate-return {
      0% {
        transform: rotate(0deg);
      }
      50% {
        transform: rotate(45deg);
      }
      100% {
        transform: rotate(0deg);
      }
    }
    .rotate{
      animation: rotate-return .6s ease-in-out 1 forwards;
    }
    #userInformations{
      transition: 0.2s ease-in-out;
      display: inline-block;
      transform-origin: center;
    }
    #userInformations:hover {
      background-color: #ffffff30;
    }
    #serverInfoContainer{
      height: calc(100% - 130px);
    }
    p {
      margin: 0;
    }

    blockquote {
      margin: 1.5em 10px;
      padding: 0.5em 10px;
      border-left: 5px solid #ccc;
      background-color: rgba(0, 0, 0, 0.18);
      font-style: italic;
      border-bottom-right-radius: 10px;
      border-top-right-radius: 10px;
    }

    a, u {
      text-decoration: none;
    }

    blockquote p {
      margin: 0;
    }
    .hljs {
    all: unset;
    }
    code{
      overflow-x: scroll !important; /* Ajoute un dÃ©filement horizontal si nÃ©cessaire */
      white-space: pre !important; /* Conserve les espaces et les retours Ã  la ligne */
      word-wrap: normal !important;
    }
    .spinner {
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-top: 4px solid #3498db;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body class="bg-dark text-white">
<!-- Sidebar -->
<div class="sidebar container pt-3 px-3">
  <h2>NoScord</h2>
  <div class="row" id="serverInfoContainer">
    <div class="col-2 px-0" id="serverContainer">
      <div data-bs-toggle="tooltip" data-bs-placement="right" title="Ajouter un serveur">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-square-fill avatar guild" viewBox="0 0 16 16">
          <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm6.5 4.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3a.5.5 0 0 1 1 0"/>
        </svg>
      </div>
    </div>
    <div class="col rounded-top pr-0" id="secondaryContainer">
      test
    </div>
  </div>
  <div class="userInfo mt-2">
    <div class="d-flex flex-row">
      <div id="userInformations" class="d-flex flex-row rounded">
        <img id="userAvatar" class="avatar" src="./images/NoScord.jpg">
        <div class="d-flex flex-column justify-content-center mx-2">
          <div id="userInfoUsername">
            <span id="usernameDisplay">Nom d'utilisateur:</span>
          </div>
          <div id="userInfoStatus">
            placeholder
          </div>
        </div>
      </div>
      <div class="position-relative mx-4  d-flex flex-row tool-container">
        <div class="align-self-center mx-1 " onclick="window.location.href = '/#'">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear-fill settings-button" viewBox="0 0 16 16">
            <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
          </svg>
        </div>
        <div class="align-self-center mx-1 rotate-return">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-mic-fill" viewBox="0 0 16 16">
            <path d="M5 3a3 3 0 0 1 6 0v5a3 3 0 0 1-6 0z"/>
            <path d="M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 .5-.5"/>
          </svg>
        </div>
        <div class="align-self-center mx-1 rotate-return">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-fill-add" viewBox="0 0 16 16">
            <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m.5-5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 0 1 0-1h1v-1a.5.5 0 0 1 1 0m-2-6a3 3 0 1 1-6 0 3 3 0 0 1 6 0"/>
            <path d="M2 13c0 1 1 1 1 1h5.256A4.5 4.5 0 0 1 8 12.5a4.5 4.5 0 0 1 1.544-3.393Q8.844 9.002 8 9c-5 0-6 3-6 4"/>
          </svg>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Contenu principal -->
<div class="main-content">
  <div class="container mt-5">
    <div id="messageContainer">
      <div id="messageBox" class="rounded mb-3 bg-dark text-white">
        <ul id="messageList" class="list-group bg-dark text-white">
        </ul>
      </div>

      <div class="input-group">
        <textarea id="messageInput" class="form-control bg-dark text-white" style="resize: none;" placeholder="Envoyez un message" rows="1" maxlength="4096"></textarea>
        <button id="emojiButton" class="btn" style="border:1px solid #ced4da;">ðŸ˜€</button>
        <button id="sendMessage" class="btn btn-primary">Envoyer</button>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@joeattardi/emoji-button@4.6.0/dist/index.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script type="module" src="./js/index.js"></script>
<script type="module">
  import { EmojiButton } from 'https://cdn.jsdelivr.net/npm/@joeattardi/emoji-button@4/dist/index.min.js';

  document.addEventListener('DOMContentLoaded', () => {
    const button = document.querySelector('#emojiButton');
    const picker = new EmojiButton({
    });
    document.querySelector('.emoji-picker').style.backgroundColor = 'rgba(var(--bs-dark-rgb), var(--bs-bg-opacity))';
    document.querySelector('.emoji-picker__search').style.backgroundColor = 'rgba(var(--bs-dark-rgb), var(--bs-bg-opacity))';
    picker.on('emoji', emoji => {
      const messageInput = document.querySelector('#messageInput');
      messageInput.value += emoji.emoji;
      setTimeout(() => {
        messageInput.focus();
      }, 100);
    });

    button.addEventListener('click', () => {
      picker.togglePicker(button);
    });
  });
  const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
  const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl));
</script>
<script>
  const rotateElements = document.getElementsByClassName('rotate-return');
  Array.from(rotateElements).forEach(rotateElement => {
    rotateElement.addEventListener('mouseover', () => {
      rotateElement.classList.add('rotate');
    });
    rotateElement.addEventListener('animationend', () => {
      rotateElement.classList.remove('rotate');
    });
  })
</script>
</body>
</html>
